<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>One21 ‚Äî by ONE AI/gency</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/css/theme.css">
<link rel="stylesheet" href="/css/components.css">
<style>
  /* Brand color from ONE AI/gency */
  .nav__brand {
    background: transparent;
    flex-direction: column;
    gap: 0;
    line-height: 1;
    text-align: center;
  }
  .nav__brand-one { color: var(--brand); font-weight: var(--weight-bold); font-size: 11px; }
  .nav__brand-21 { color: var(--text-primary); font-weight: var(--weight-light); font-size: 16px; display: block; line-height: 1; }

  /* SVG icon base ‚Äî shared across all inline SVGs */
  .icon-svg {
    width: 18px;
    height: 18px;
    fill: none;
    stroke: currentColor;
    stroke-width: 1.5;
    stroke-linecap: round;
    stroke-linejoin: round;
    flex-shrink: 0;
  }
  .icon-svg--sm { width: 14px; height: 14px; }
  .icon-svg--lg { width: 22px; height: 22px; }

  /* Member row ‚Äî reusable in info panel */
  .member-row {
    display: flex;
    align-items: center;
    gap: var(--sp-3);
    padding: var(--sp-2) 0;
  }
  .member-row__name {
    font-size: var(--font-md);
    color: var(--text-primary);
    font-weight: var(--weight-regular);
  }
  .member-row__role {
    font-size: var(--font-xs);
    color: var(--text-tertiary);
    margin-left: auto;
    font-weight: var(--weight-medium);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  /* Room info header in info-panel */
  .room-info {
    text-align: center;
    padding: var(--sp-6) var(--sp-5);
  }
  .room-info .avatar {
    margin: 0 auto var(--sp-3);
  }
  .room-info__name {
    font-size: var(--font-lg);
    font-weight: var(--weight-light);
    color: var(--text-primary);
    letter-spacing: -0.01em;
  }
  .room-info__desc {
    font-size: var(--font-sm);
    color: var(--text-secondary);
    margin-top: var(--sp-1);
  }

  /* Stack utility */
  .stack { display: flex; flex-direction: column; gap: var(--sp-2); }

  /* Logout button */
  .nav__logout {
    color: var(--text-tertiary);
    transition: color var(--transition-fast);
  }
  .nav__logout:hover {
    color: var(--danger);
  }
</style>
</head>
<body>

<div class="app">

  <!-- NAV -->
  <nav class="nav">
    <div class="nav__brand"><span class="nav__brand-one">ONE</span><span class="nav__brand-21">21</span></div>

    <button class="nav__item nav__item--active" title="Mesaje">
      <svg class="icon-svg icon-svg--lg" viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
    </button>
    <button class="nav__item" title="Contacte">
      <svg class="icon-svg icon-svg--lg" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
    </button>
    <button class="nav__item" title="Apeluri">
      <svg class="icon-svg icon-svg--lg" viewBox="0 0 24 24"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
    </button>
    <button class="nav__item" title="Fisiere">
      <svg class="icon-svg icon-svg--lg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
    </button>

    <div class="nav__spacer"></div>

    <div class="nav__agency">
      <span style="color: var(--brand); font-size: 9px; font-weight: 700; letter-spacing: 0.05em;">ONE</span>
      <span style="color: var(--text-secondary); font-size: 8px; font-weight: 300;">AI/gency</span>
    </div>

    <button class="nav__item" title="Admin" onclick="window.location='/admin.html'" id="adminNavBtn" style="display:none;">
      <svg class="icon-svg icon-svg--lg" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
    </button>
    <button class="nav__item nav__logout" title="Deconectare" onclick="Auth.logout()">
      <svg class="icon-svg icon-svg--lg" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
    </button>
  </nav>

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar__header">
      <h2 class="sidebar__title">Mesaje</h2>
      <button class="btn btn--icon btn--ghost" id="newRoomBtn" title="Conversatie noua">
        <svg class="icon-svg" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
      </button>
    </div>

    <div class="sidebar__search">
      <div class="input-group">
        <svg class="input-group__icon icon-svg" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <input class="input" type="text" placeholder="Cauta conversatii...">
      </div>
    </div>

    <div class="sidebar__list" id="sidebarList">
      <!-- Dynamically populated by chat.js -->
    </div>
  </aside>

  <!-- MAIN CHAT -->
  <main class="main">
    <header class="panel-header">
      <div class="avatar avatar--md" id="panelAvatar"></div>
      <div class="panel-header__info">
        <h3 class="panel-header__title" id="panelTitle">Selecteaza o conversatie</h3>
        <span class="panel-header__subtitle" id="panelSubtitle"></span>
      </div>
      <div class="panel-header__actions">
        <button class="btn btn--icon btn--ghost" title="Cauta">
          <svg class="icon-svg" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        </button>
        <button class="btn btn--icon btn--ghost" title="Apel">
          <svg class="icon-svg" viewBox="0 0 24 24"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
        </button>
        <button class="btn btn--icon btn--ghost" title="Mai multe">
          <svg class="icon-svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg>
        </button>
      </div>
    </header>

    <div class="messages-area" id="messagesArea">
      <!-- Dynamically populated by chat.js -->
    </div>

    <div class="compose">
      <button class="btn btn--icon btn--ghost" title="Atasament">
        <svg class="icon-svg" viewBox="0 0 24 24"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/></svg>
      </button>
      <input class="compose__input" id="composeInput" type="text" placeholder="Scrie un mesaj...">
      <button class="compose__send" id="sendBtn" title="Trimite">
        <svg class="icon-svg" viewBox="0 0 24 24"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
      </button>
    </div>
  </main>

  <!-- INFO PANEL -->
  <aside class="info-panel">
    <div class="info-panel__section room-info">
      <div class="avatar avatar--lg" id="infoPanelAvatar"></div>
      <h3 class="room-info__name" id="infoPanelName"></h3>
      <p class="room-info__desc" id="infoPanelDesc"></p>
    </div>

    <div class="info-panel__section">
      <div class="info-panel__section-header" style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
        <h4 class="info-panel__section-title">Membri</h4>
        <button class="btn btn--icon btn--ghost" id="addMemberBtn" title="AdaugƒÉ membru" style="font-size:16px;">+</button>
      </div>
      <div class="stack" id="infoPanelMembers"></div>
    </div>

    <div class="info-panel__section" style="padding-top:0;">
      <button class="btn btn--secondary" id="editRoomBtn" style="width:100%;margin-bottom:8px;">‚úèÔ∏è EditeazƒÉ camera</button>
      <button class="btn btn--danger" id="archiveRoomBtn" style="width:100%;">üì¶ ArhiveazƒÉ</button>
    </div>
  </aside>

  <!-- ‚îÄ‚îÄ Modal: Create Room ‚îÄ‚îÄ -->
  <div id="modalCreateRoom" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal__header">
        <h3 class="modal__title">Conversa»õie nouƒÉ</h3>
        <button class="btn btn--icon modal__close" id="closeCreateRoom">‚úï</button>
      </div>
      <div class="modal__body">
        <div class="modal__field">
          <label class="modal__label">Tip</label>
          <select id="newRoomType" class="modal__select">
            <option value="group">Grup</option>
            <option value="channel">Canal</option>
            <option value="direct">Direct (1:1)</option>
          </select>
        </div>
        <div class="modal__field" id="roomNameField">
          <label class="modal__label">Nume</label>
          <input type="text" id="newRoomName" class="modal__input" placeholder="ex: Proiect Alpha" maxlength="80"/>
        </div>
        <div class="modal__field" id="roomDescField">
          <label class="modal__label">Descriere (op»õional)</label>
          <input type="text" id="newRoomDesc" class="modal__input" placeholder="Despre ce e aceastƒÉ camerƒÉ..." maxlength="200"/>
        </div>
        <div class="modal__field">
          <label class="modal__label">Membri</label>
          <div id="userPickerList" class="user-picker"></div>
        </div>
        <p id="createRoomError" class="modal__error hidden"></p>
      </div>
      <div class="modal__footer">
        <button class="btn btn--secondary" id="cancelCreateRoom">AnuleazƒÉ</button>
        <button class="btn btn--primary" id="submitCreateRoom">CreeazƒÉ</button>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ Modal: Add Member ‚îÄ‚îÄ -->
  <div id="modalAddMember" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal__header">
        <h3 class="modal__title">AdaugƒÉ membru</h3>
        <button class="btn btn--icon modal__close" id="closeAddMember">‚úï</button>
      </div>
      <div class="modal__body">
        <div id="addMemberList" class="user-picker"></div>
        <p id="addMemberError" class="modal__error hidden"></p>
      </div>
      <div class="modal__footer">
        <button class="btn btn--secondary" id="cancelAddMember">AnuleazƒÉ</button>
        <button class="btn btn--primary" id="submitAddMember">AdaugƒÉ</button>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ Modal: Edit Room ‚îÄ‚îÄ -->
  <div id="modalEditRoom" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal__header">
        <h3 class="modal__title">EditeazƒÉ camera</h3>
        <button class="btn btn--icon modal__close" id="closeEditRoom">‚úï</button>
      </div>
      <div class="modal__body">
        <div class="modal__field">
          <label class="modal__label">Nume</label>
          <input type="text" id="editRoomName" class="modal__input" maxlength="80"/>
        </div>
        <div class="modal__field">
          <label class="modal__label">Descriere</label>
          <input type="text" id="editRoomDesc" class="modal__input" maxlength="200"/>
        </div>
        <p id="editRoomError" class="modal__error hidden"></p>
      </div>
      <div class="modal__footer">
        <button class="btn btn--secondary" id="cancelEditRoom">AnuleazƒÉ</button>
        <button class="btn btn--primary" id="submitEditRoom">SalveazƒÉ</button>
      </div>
    </div>
  </div>

</div>

<script src="/socket.io/socket.io.js"></script>
<script src="/js/auth.js"></script>
<script src="/js/chat.js"></script>
<script src="/js/rooms.js"></script>
</body>
</html>
